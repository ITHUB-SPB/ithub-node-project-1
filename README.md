# Сопровождение курса "Основы Node.JS"

## (КТ2 + КТ3) Работа с node:sqlite3. Создание cli-утилиты. 

### Задачи и критерии оценивания (12 баллов + бонус)

#### Задача 1. Рефакторинг структуры проекта

✔️ 1.1. Создать директорию `src/database/cli` с модулями `index.js`, `seed.js`, `ddl.js`.

✔️ 1.2. Перенести в `seed.js` функцию `seedTables` и сделать ее экспортируемой по умолчанию.

✔️ 1.3. Перенести в `ddl.js` функции, обеспечивающие создание и сброс таблиц, использовать для них именованный экспорт.

✔️ 1.4. В `index.js` должна располагаться экспортируемая по умолчанию функция `cli`, вызывающая импортированные функции, описанные выше.

✔️ 1.5. (3 балла) Структура соответствует описанной выше, npm-скрипты `db:create`, `db:reset` и `db:seed` работают корректно.

#### Задача 2. Доработка функционала сидирования базы данных

✔️ 2.1. Выделить существующую логику наполнения таблицы `users` в функцию `seedUsers`, вызывать ее из `seedTables`.

✔️ 2.2. (2 балла) Создать функцию `seedBookings`, отвечающую за наполнение таблицы `bookings` двадцатью искусственными (но корректными!) записями, связанными по внешнему ключу с созданными ранее искусственными пользователями, вызывать ее из `seedTables`.

✔️ 2.3. (1 балл) Если таблицы не пустые, новые записи не добавлять, сообщать об этом в формате `таблица <название> уже содержит записи`.

✔️ 2.4. (1 балл) Добавить возможность уточнения списка сидируемых таблиц при запуске команд, например `npm run db:seed users` будет наполнять только таблицу пользователей, `npm run db:seed users bookings` будет наполнять обе. При запуске без дополнительных аргументов, по умолчанию наполнять все существующие таблицы. 

#### Задача 3. Доработка ddl-функционала

✔️ 3.1 (1 балл) Добавить в `resetTables` логику для удаления всех записей из таблицы `bookings`.

✔️ 3.2 (1 балл) Добавить в `resetTables` возможность уточнения списка сбрасываемых таблиц по аналогии с 2.4.

✔️ 3.3 (1 балл) Добавить в `createTables` возможность форсированного создания таблиц (с удалением существующих, если они присутствуют), для этого предусмотреть флаги `--force` и `-F` при запуске через npm-скрипт. 

#### Задача 4 (базовая). Доработка DX при использовании cli-утилиты

4.1 (1 балл) Добавить help-сообщение, доступное через npm-скрипт `npm run db:help`.

4.2 (1 балл) Используйте библиотеку [chalk](https://github.com/chalk/chalk) для красочного и форматированного вывода консольных сообщений и ошибок.

4.3 (1 балл) Используйте на выбор [ora](https://github.com/sindresorhus/ora) либо [yocto-spinner](https://github.com/sindresorhus/yocto-spinner) для отображения спиннера во время выполнения действия.

#### Задача 4 (альтернатива). Доработка DX при использовании cli-утилиты

(до 5 баллов) Реализовать интерактивное взаимодействие с пользователем, используя на выбор: 
- [inquirer.js](https://github.com/SBoudrias/Inquirer.js), 
- [meow](https://github.com/sindresorhus/meow) 
- [yargs](https://github.com/yargs/yargs)

#### Штрафные санкции

- (минус 0.5 балла) присутствует не отформатированный код,
- (минус 0.5 балла) присутствуют ошибки линтера,
- (минус 1 балл) работа сдана архивом

_Округление будет происходит по правилам математики (при этом половина будет округляться вверх)_

## Установка и настройка

1. Клонируйте репозиторий через `git clone https://github.com/ITHUB-SPB/ithub-node-project-1.git`
2. Откройте директорию в редакторе кода
3. Установите зависимости через `npm i`
4. Запустите сервер командой `npm run dev`.
5. Команда для форматирования `npm run format`, команда для проверки линтером `npm run lint`.

# Сопроводительный репозиторий к курсу по основам Node.JS

## (КТ2 + КТ3, 12 базовых баллов + 3 бонусных) Работа с sqlite3 через драйвер. Создание вспомогательной cli-утилиты. 

#### Установка и настройка

1. Клонируйте репозиторий через `git clone https://github.com/ITHUB-SPB/ithub-node-project-1.git`

2. Откройте директорию в `VS Code` (File -> Open Folder), установите зависимости через `npm i`

3. Запустите сервер командой `npm run dev`.

4. Команда для запуска форматтера `npm run format`, для проверки линтером `npm run lint`.

#### Критерии оценивания

0. Рефакторинг структуры (3 балла, если корректно выполнены все пункты, иначе 0)
- создать директорию `src/database/cli` с модулями `index.js`, `seed.js`, `ddl.js`;
- перенести в `seed.js` функцию `seedTables` и сделать ее экспортируемой по умолчанию;
- перенести в `ddl.js` функции, обеспечивающие создание и сброс таблиц, использовать для них именованный экспорт;
- в `index.js` должна располагаться экспортируемая по умолчанию функция `cli`, вызывающая импортированные функции, описанные выше;
- должны работать npm-скрипты `db:create`, `db:reset` и `db:seed`, при необходимости внесите изменения с учетом новой структуры.

1. Доработка функционала сидирования базы данных (до 4 баллов)

1.1 Выделить существующую логику наполнения таблицы `users` в функцию `seedUsers`, вызывать ее из `seedTables`.
1.2 (2 балла) Создать функцию `seedBookings`, отвечающую за наполнение таблицы `bookings` двадцатью искусственными (но корректными!) записями, связанными по внешнему ключу с созданными ранее искусственными пользователями, вызывать ее из `seedTables`.
1.3 (1 балл) Если таблицы не пустые, новые записи не добавлять, сообщать об этом в формате `таблица <название> уже содержит записи`.
1.4 (1 балл) Добавить возможность уточнения списка сидируемых таблиц при запуске команд, например `npm run db:seed users` будет наполнять только таблицу пользователей, `npm run db:seed users bookings` будет наполнять обе. При запуске без дополнительных аргументов, по умолчанию наполнять все существующие таблицы. 

2. Доработка ddl-функционала (до 3 баллов)

2.1 (1 балл) Добавить в `resetTables` логику для удаления всех записей из таблицы `bookings`.
2.2 (1 балл) Добавить в `resetTables` возможность уточнения списка сбрасываемых таблиц по аналогии с 1.4.
2.3 (1 балл) Добавить в `createTables` возможность форсированного создания таблиц (с удалением существующих, если они присутствуют), для этого предусмотреть флаги `--force` и `-F` при запуске через npm-скрипт. 

3. Доработка DX при использовании cli-утилиты (базовый вариант, до 3 баллов)

3.1 (1 балл) Добавить help-сообщение, доступное через npm-скрипт `npm run db:help`.
3.2 (1 балл) Используйте библиотеку [chalk](https://github.com/chalk/chalk) для красочного и форматированного вывода консольных сообщений и ошибок.
3.3 (1 балл) Используйте на выбор [ora](https://github.com/sindresorhus/ora) либо [yocto-spinner](https://github.com/sindresorhus/yocto-spinner) для отображения спиннера во время выполнения действия.

3. Доработка DX при использовании cli-утилиты (продвинутый вариант, до 5 баллов)

Реализовать интерактивное взаимодействие с пользователем, используя на выбор: 
- [inquirer.js](https://github.com/SBoudrias/Inquirer.js), 
- [meow](https://github.com/sindresorhus/meow) 
- [yargs](https://github.com/yargs/yargs)

#### Штрафные санкции

- (минус 0.5 балла) присутствует не отформатированный код,
- (минус 0.5 балла) присутствуют ошибки линтера,
- (минус 1 балл) работа сдана архивом

_Округление будет происходит по правилам математики (при этом половина будет округляться вверх)_
